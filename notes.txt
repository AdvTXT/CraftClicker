Request the crafting of a recipe.
Ensure the player has the effective inventory to craft the recipe.
Reserve the required resources for the crafting of the recipe.
Start the crafting animation.
At the end of the crafting animation:
  Ensure the the player still has the effective inventory (minus what was reserved specifically for this recipe) to craft the recipe.
  If so, release the reserved resources and remove them from the inventory.
  
  
Rethinking the releasing the reserved resources.

Whenever ANY recipe gets crafted, the resources that were previously reserved need to be released.
However, the new item that was just crafted needs to be marked as reserved!